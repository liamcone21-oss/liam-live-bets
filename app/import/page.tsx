"use client"; import { useState } from 'react'; import { parseCSV } from '@/lib/csv/parseBets';
export default function ImportPage(){const [log,setLog]=useState(''); async function onFile(e:React.ChangeEvent<HTMLInputElement>){const file=e.target.files?.[0]; if(!file) return; try{const text=await file.text(); const bets=await parseCSV(text); setLog(`Parsed ${bets.length} bets. Uploading...`); const res=await fetch('/api/bets/bulk',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({bets})}); if(!res.ok) throw new Error(`Upload failed ${res.status}`); setLog(`Imported ${bets.length} bets successfully.`);}catch(err:any){setLog(`Error: ${err.message}`)}} return(<main className='rounded-2xl bg-white p-4 shadow'><h2 className='mb-2 text-lg font-semibold'>Import Bets (CSV)</h2><p className='text-sm text-zinc-600'>Upload a CSV export from DraftKings, FanDuel, AnyBet365, or WagerHouse247.</p><div className='mt-4 flex items-center gap-3'><input type='file' accept='.csv' onChange={onFile}/><span className='text-xs text-zinc-500'>Format is auto-detected.</span></div><pre className='mt-4 rounded bg-zinc-100 p-3 text-xs'>{log}</pre></main>)}
